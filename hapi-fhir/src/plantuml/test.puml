@startuml Test Diagram

box "SRM_Machine" #LightBlue
participant SRM_Ubuntu
participant SRM_PLC
end box

loop 10 sec
    SRM_Ubuntu->FHIR_R4_Server ++: Pull DLO Orders for all Contaniers from a same patient
    return orders
    SRM_Ubuntu->SRM_Ubuntu: Store DLO Orders
end
loop for each container 
SRM_PLC->SRM_PLC: Scan container ID
SRM_PLC->SRM_Ubuntu: Read contaniner ID counting test
SRM_PLC->SRM_PLC: Print data in GUI
SRM_PLC->SRM_Ubuntu: Start Capture
SRM_Ubuntu->SRM_Ubuntu: counting test
SRM_Ubuntu->SRM_Ubuntu: Best Imaged Captured
SRM_Ubuntu->SRM_PLC: Container ID is 'OK'  put in tray X
SRM_PLC->SRM_PLC :Put Container ID in 'OK' exit 
SRM_PLC->SRM_PLC: Next contanier
end
loop 30 sec
    SRM_Ubuntu->SRM_Ubuntu: Check pending events  
    SRM_Ubuntu->SRM_Ubuntu: DICOM Generated
    SRM_Ubuntu->DICOM_Server: SEND DICOM to Cloud (POST)
    SRM_Ubuntu->SRM_Ubuntu: Sent Image
    SRM_Ubuntu->Message_Queue: Mark Contanier as Completed
end 
loop 60 sec
    SRM_Ubuntu->ELK: Send Metrics to Cloud
end 
@enduml